@import 'tailwindcss';

@font-face {
  font-family: 'Annotation Mono';
  src:
    url('/annotation-mono-regular.woff2') format('woff2'),
    url('/annotation-mono-regular.otf') format('opentype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@theme {
  /* Beige and monochrome colors */
  --color-bg: #f5f0e8;
  --color-beige-light: #f5f0e8;
  --color-beige: #e8dcc8;
  --color-beige-dark: #d4c4a8;

  --color-sketch-dark: #2a2a2a;
  --color-sketch-medium: #4a4a4a;
  --color-sketch-light: #6a6a6a;
  --color-sketch-border: #3a3a3a;

  --font-mono: 'Annotation Mono', monospace;

  --doodly-filter: url(#handDrawnNoise);
}

/* ===== Doodly Filter Utility ===== */
@utility filter-doodly {
  filter: var(--doodly-filter);
}

/* ===== Layout Utilities ===== */
@utility min-h-input {
  min-height: theme(spacing.6);
}

@utility size-vote-btn {
  width: theme(spacing.10);
  height: theme(spacing.10);
}

@utility size-vote-wrapper {
  width: theme(spacing.11);
  height: theme(spacing.11);
  shape-outside: circle(50%);
}

@utility dir-ltr {
  direction: ltr;
}

/* Doodly border effect - self-contained, no additional border classes needed */
.doodly-border,
.doodly-border-dashed,
.doodly-border-b {
  @apply relative border-none;
  --doodly-border-style: solid;
  --doodly-border-color: var(--color-sketch-dark);
  --doodly-border-width: 2px;
}

.doodly-border::before,
.doodly-border-dashed::before,
.doodly-border-b::before {
  @apply content-[''] absolute inset-0 rounded-[inherit] pointer-events-none filter-doodly;
  border: var(--doodly-border-width) var(--doodly-border-style) var(--doodly-border-color);
}

/* Doodly dashed border variant */
.doodly-border-dashed {
  --doodly-border-style: dashed;
  --doodly-border-color: var(--color-sketch-medium);
}

.doodly-border-dashed:hover {
  --doodly-border-color: var(--color-sketch-dark);
}

/* Bottom border only doodly effect */
.doodly-border-b::before {
  border: none;
  border-bottom: var(--doodly-border-width) var(--doodly-border-style) var(--doodly-border-color);
}

/* Wobble animation for doodly effect */
@keyframes wobble {
  0% {
    transform: translate(0px, 0px) rotate(0deg);
  }
  25% {
    transform: translate(1px, -1px) rotate(0.5deg);
  }
  50% {
    transform: translate(-1px, 1px) rotate(-0.5deg);
  }
  75% {
    transform: translate(1px, 1px) rotate(0.3deg);
  }
  100% {
    transform: translate(0px, 0px) rotate(0deg);
  }
}

.wobble {
  animation: wobble 3s ease-in-out infinite;
}

/* Woosh scale effect for buttons */
.hover-woosh {
  transition: transform 0.15s ease-out;
}

.hover-woosh:hover {
  transform: scale(1.15);
}

/* Heart bounce animation */
@keyframes heartBounce {
  0% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.3);
  }
  50% {
    transform: scale(0.9);
  }
  75% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

.heart-bounce {
  animation: heartBounce 0.4s ease-in-out;
}

/* Card movement animations */
@keyframes cardMoveUp {
  0% {
    transform: translateY(10px);
    opacity: 0.7;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
  50% {
    transform: translateY(-3px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
  }
  100% {
    transform: translateY(0);
    opacity: 1;
    box-shadow: none;
  }
}

@keyframes cardMoveDown {
  0% {
    transform: translateY(-10px);
    opacity: 0.7;
  }
  50% {
    transform: translateY(3px);
  }
  100% {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes cardVoted {
  0% {
    transform: scale(1);
    border-color: var(--color-sketch-dark);
  }
  30% {
    transform: scale(1.02);
    border-color: var(--color-sketch-dark);
    box-shadow: 0 0 0 3px rgba(42, 42, 42, 0.2);
  }
  100% {
    transform: scale(1);
    border-color: var(--color-sketch-dark);
    box-shadow: none;
  }
}

.card-move-up {
  animation: cardMoveUp 0.4s ease-out;
  will-change: transform, opacity;
}

.card-move-down {
  animation: cardMoveDown 0.3s ease-out;
  will-change: transform, opacity;
}

.card-voted {
  animation: cardVoted 0.3s ease-out;
  will-change: transform, box-shadow;
}

/* Column styling */
.column {
  @apply bg-white/60 rounded-xl p-4 relative border-none;
  --doodly-border-style: solid;
  --doodly-border-color: var(--color-sketch-dark);
  --doodly-border-width: 2px;
  will-change: transform;
  contain: layout style;
}

.column::before {
  @apply content-[''] absolute inset-0 rounded-[inherit] pointer-events-none filter-doodly;
  border: var(--doodly-border-width) var(--doodly-border-style) var(--doodly-border-color);
}

/* Optional inner border effect */
.column::after {
  @apply content-[''] absolute pointer-events-none filter-doodly;
  inset: 2px;
  border: 1px solid var(--color-sketch-medium);
  border-radius: 9px;
  opacity: 0.4;
}

/* Auto-resize textarea */
.auto-resize {
  field-sizing: content;
  min-height: 1.5rem;
  overflow: hidden;
}

/* Reusable button styles - shared base properties */
.btn-primary,
.btn-secondary,
.btn-danger {
  @apply relative border-none rounded transition-all cursor-pointer;
  --btn-border-color: var(--color-sketch-dark);
}

.btn-primary::before,
.btn-secondary::before,
.btn-danger::before {
  @apply content-[''] absolute inset-0 rounded-[inherit] pointer-events-none filter-doodly;
  border: 2px solid var(--btn-border-color);
}

.btn-primary:disabled,
.btn-secondary:disabled,
.btn-danger:disabled {
  @apply opacity-50 cursor-not-allowed;
}

/* Button variants */
.btn-primary {
  @apply text-sketch-dark hover:bg-sketch-dark hover:text-beige-light;
}

.btn-secondary {
  @apply text-sketch-medium hover:text-sketch-dark;
  --btn-border-color: var(--color-sketch-medium);
}

.btn-secondary:hover {
  --btn-border-color: var(--color-sketch-dark);
}

.btn-ghost {
  @apply border-transparent text-sketch-medium hover:text-sketch-dark cursor-pointer;
}

.btn-danger {
  @apply text-red-500 hover:bg-red-500 hover:text-white;
  --btn-border-color: var(--color-red-400);
}

.btn-danger:hover {
  --btn-border-color: var(--color-red-500);
}

.btn-sm {
  @apply text-xs px-2 py-1;
}

.btn-md {
  @apply text-sm px-3 py-2;
}

/* Reusable input styles */
.input {
  @apply bg-white border-1 border-sketch-medium text-sketch-dark px-3 py-2 rounded focus:border-sketch-dark focus:outline-none transition-all relative filter-doodly;
  @apply shadow-[0_0_0_1px_var(--color-sketch-medium)];
  will-change: border-color;
}

.input:focus {
  @apply shadow-[0_0_0_1px_var(--color-sketch-dark)];
}
